<run>
  <desc>
    Various cases which have been reported or identified as causing buffer failures.
  </desc>
  <precisionModel type="FLOATING" />
  <resultMatcher>com.vividsolutions.jtstest.testrunner.BufferResultMatcher</resultMatcher>

<case>
  <desc>
  	Discovered on Feb 25, 2011.  An incorrect hole is generated
  	Result provided below is correct output.
  	The test works correctly for slightly smaller (0.7) and larger (1.1) distance values.
  </desc>
  <a>
POLYGON ((1676334.370908338 4847442.47738721, 1676334.381771572 4847442.672985536, 1676334.430559768 4847442.86271278, 1676334.515400594 4847443.039287834, 1676336.265400594 4847445.919287834, 
  1676336.383019845 4847446.075914382, 1676336.528914198 4847446.206608688, 1676336.697486246 4847446.306356514, 1676336.882268526 4847446.371330916, 1676337.07617165 4847446.399039078, 
  1676337.2717563 4847446.388417942, 1676337.461518643 4847446.339875002, 1676337.638178226 4847446.255272662, 1676340.477889498 4847444.534796128, 1676340.477889507 4847444.534796122, 
  1676340.708178227 4847444.395272662, 1676340.865054944 4847444.277767458, 1676340.995997551 4847444.13191887, 1676341.095975523 4847443.963330074, 1676341.16114793 4847443.778477878, 
  1676341.189010992 4847443.584463894, 1676341.178494273 4847443.388741704, 1676341.130001801 4847443.19883052, 1676341.04539655 4847443.022026312, 1676339.29539655 4847440.132026312, 
  1676339.177687757 4847439.974857962, 1676339.031535752 4847439.843721232, 1676338.862575756 4847439.743672394, 1676338.6773224 4847439.678569058, 1676338.482918545 4847439.650921426, 
  1676338.286859869 4847439.661795518, 1676338.096705855 4847439.710772058, 1676337.91978832 4847439.795962644, 1676334.84978832 4847441.665962642, 1676334.693269131 4847441.783769514, 
  1676334.56272065 4847441.92983049, 1676334.463152898 4847442.098540236, 1676334.398386959 4847442.283424222, 1676334.370908338 4847442.47738721), 
  (1676338.816753609 4847443.202781668, 1676337.455985112 4847444.027221212, 1676336.743325995 4847442.854387922, 1676338.10393518 4847442.025612946, 1676338.816753609 4847443.202781668))
  </a>
<test>
  <op name='buffer' arg1='A' arg2='1.0'>
POLYGON ((1676333.3807948758 4847442.337118426, 1676333.3724470409 4847442.532840234, 1676333.3833102747 4847442.72843856, 1676333.4132801052 4847442.922032276, 1676333.4620683014 4847443.11175952, 
  1676333.5292056508 4847443.29579563, 1676333.6140464768 4847443.472370684, 1676333.6608011876 4847443.558575668, 1676335.4108011876 4847446.438575668, 1676335.4657667114 4847446.51977568, 
  1676335.5833859623 4847446.676402228, 1676335.715779222 4847446.820756614, 1676335.8616735751 4847446.951450921, 1676336.0196662978 4847447.067228568, 1676336.1882383458 4847447.166976393, 
  1676336.3657689604 4847447.249735357, 1676336.5505512403 4847447.314709759, 1676336.7408085682 4847447.361274894, 1676336.9347116924 4847447.388983056, 1676337.1303962986 4847447.397567839, 
  1676337.3259809485 4847447.386946704, 1676337.519585165 4847447.357221768, 1676337.709347508 4847447.308678828, 1676337.893443487 4847447.241784604, 1676338.07010307 4847447.157182264, 
  1676338.156356451 4847447.110545325, 1676340.996067723 4847445.390068791, 1676341.2263564568 4847445.250545322, 1676341.307680706 4847445.195645561, 1676341.464557423 4847445.0781403575, 
  1676341.6091631844 4847444.945826532, 1676341.7401057913 4847444.799977944, 1676341.856124575 4847444.641998768, 1676341.9561025472 4847444.473409972, 1676342.0390771602 4847444.295834664, 
  1676342.104249567 4847444.110982468, 1676342.1509923122 4847443.920633071, 1676342.1788553742 4847443.726619087, 1676342.1875704988 4847443.530808406, 1676342.1770537798 4847443.335086215, 
  1676342.147406468 4847443.141336856, 1676342.098913996 4847442.9514256725, 1676342.0320432307 4847442.767181057, 1676341.9474379797 4847442.590376848, 1676341.9007930998 4847442.504052622, 
  1676340.1507930998 4847439.614052623, 1676340.0958057414 4847439.532572288, 1676339.9780969482 4847439.375403938, 1676339.8455260543 4847439.230551568, 1676339.6993740492 4847439.0994148385, 
  1676339.5410531552 4847438.983260881, 1676339.3720931592 4847438.883212043, 1676339.1941266607 4847438.800235063, 1676339.0088733048 4847438.735131727, 1676338.8181231327 4847438.688531103, 
  1676338.6237192776 4847438.66088347, 1676338.4275401966 4847438.652455984, 1676338.2314815207 4847438.663330076, 1676338.03743769 4847438.693400673, 1676337.847283676 4847438.742377212, 
  1676337.6628568775 4847438.809786451, 1676337.4859393425 4847438.894977037, 1676337.3995766402 4847438.941925286, 1676334.3295766402 4847440.811925285, 1676334.2484252925 4847440.866986729, 
  1676334.0919061035 4847440.984793602, 1676333.9476787418 4847441.1173650045, 1676333.8171302609 4847441.26342598, 1676333.701516191 4847441.421571815, 1676333.601948439 4847441.590281562, 
  1676333.519384575 4847441.767932686, 1676333.454618636 4847441.952816672, 1676333.4082734967 4847442.143155438, 1676333.3807948758 4847442.337118426))
  </op>
</test>
</case>

<case>
  <desc>
  	http://lists.osgeo.org/pipermail/postgis-users/2013-January/036334.html
  	Buffer result has spurious small extra polygon,
  	due to incorrect construction of buffer offset curve.
  	Result provided below is correct output.
  </desc>
  <a>
LINESTRING (640770.332537465 216785.425146015, 640770.356311913 216785.560172686, 640770.475488952 216786.226162019, 640770.647396495 216787.800152365, 640770.658978918 216789.268376902, 
  640770.447752096 216792.399898366, 640769.98018796 216795.624688816, 640769.110287021 216798.527305023, 640767.648768098 216801.891389348, 640766.02448565 216804.805892778, 
  640764.74005588 216807.134569434, 640763.337363474 216809.560477487, 640761.650901703 216812.246990061, 640759.955600712 216815.327305019, 640758.482499366 216817.868732504, 
  640757.383693167 216819.548488661, 640756.238862077 216821.226720821, 640754.01503683 216824.434442434, 640751.366929134 216828.435255234, 640749.204368809 216832.450088865, 
  640747.25516891 216836.227787618, 640746.014020829 216838.801219168, 640745.393751588 216840.360274284, 640744.315976633 216842.854457673, 640743.400050801 216844.65704848, 
  640742.582575565 216846.277673322, 640741.52491745 216848.478638524, 640740.503835408 216850.705816576, 640739.787553975 216852.270967708, 640739.053289307 216853.851968469, 
  640738.173025147 216855.546355058, 640737.55488951 216856.568961104, 640736.817272035 216857.822910812, 640735.910795021 216859.35697228, 640734.77510795 216861.236982439, 
  640733.832969266 216862.938074642, 640732.814325629 216865.039674844, 640731.225095251 216869.012141189, 640729.979984761 216871.879095724, 640729.445974092 216873.02148841, 
  640729.002794006 216873.679857725, 640728.952197105 216873.745389857, 640728.676962154 216874.089814544)  </a>
<test>
  <op name='buffer' arg1='A' arg2='100.0'>
POLYGON ((640638.9602330392 216830.41627953897, 640637.6789730891 216832.6245762575, 640631.3380072431 216851.17414617367, 640628.737722846 216870.60435237407, 640629.9780473689 216890.16850293096, 
  640635.011315836 216909.11475851017, 640643.6441025628 216926.715025135, 640655.5446543967 216942.29293442937, 640670.2556398048 216955.2498360753, 640687.2117238675 216965.08780360883, 
  640705.7612937837 216971.42876945485, 640725.191499984 216974.029053852, 640744.7556505409 216972.78872932907, 640763.7019061202 216967.75546086195, 640781.302172745 216959.12267413514, 
  640796.8800820394 216947.22212230123, 640809.6434126614 216932.7309132399, 640811.9588316501 216929.52156094398, 640812.4020117361 216928.863191629, 640820.0370995901 216915.36824721147, 
  640820.571110259 216914.22585452546, 640821.7032612086 216911.71426307296, 640822.9483716986 216908.84730853798, 640823.2586106707 216908.10346436422, 640823.4446934869 216907.7871235766, 
  640823.7530518768 216907.27699418928, 640826.912210114 216901.6479499482, 640827.7924742739 216899.95356335922, 640829.7491765573 216895.9738871799, 640830.4834412253 216894.39288641888, 
  640830.7177760381 216893.8846038811, 640831.4199399 216892.35030114377, 640832.0499109842 216890.9762119772, 640832.2996192862 216890.45657403787, 640832.6181077951 216889.82517828836, 
  640833.4673894796 216888.15374671214, 640836.1122804958 216882.52105063383, 640837.1900554508 216880.02686724483, 640837.2196891324 216879.9554398741, 640837.2628346098 216879.8718206329, 
  640838.4209553085 216878.20130771815, 640838.8482623287 216877.57995489024, 640839.9930934187 216875.90172273025, 640841.0691496847 216874.29101662073, 640842.1679558838 216872.61126046372, 
  640844.999305102 216868.0169361132, 640846.472406448 216865.4755086282, 640847.5636439583 216863.54380383994, 640847.873518959 216862.98076954397, 640848.0322995551 216862.72783403413, 
  640849.9075325376 216859.61650437987, 640851.3102249437 216857.1905963269, 640852.3035072248 216855.43200195988, 640853.4819239745 216853.2955273621, 640854.9993506601 216850.57275874168, 
  640859.3669998952 216841.73817034703, 640860.8285188182 216838.37408602203, 640864.9009404592 216827.23533027506, 640865.7708413982 216824.33271406806, 640868.9453624933 216809.97370375038, 
  640869.4129266293 216806.7489133004, 640870.2210380215 216799.12978808515, 640870.4322648435 216795.99826662114, 640870.6558674623 216788.47952871647, 640870.6442850393 216787.01130417947, 
  640870.0562549751 216776.94294942566, 640869.8843474322 216775.36895907967, 640868.9118359282 216768.61123670026, 640868.7926588892 216767.94524736726, 640868.7793140205 216767.9476353964, 
  640863.5422764267 216749.2043707239, 640854.6849547137 216731.71602477558, 640842.5860169111 216716.29169023613, 640827.7104184137 216703.52411563174, 640810.6298201293 216693.90395169437, 
  640792.0006198711 216687.80089592905, 640772.5387273576 216685.44948534624, 640752.9920522037 216686.9400833359, 640734.1117621739 216692.2154070533, 640716.6234162257 216701.07272876636, 
  640701.1990816861 216713.1716665689, 640688.4315070817 216728.04726506636, 640678.8113431444 216745.12786335076, 640672.7082873791 216763.75706360897, 640672.3512380109 216766.71224994565, 
  640671.8329435985 216767.45985553684, 640670.6267181488 216769.24034576118, 640667.9786104528 216773.2411585612, 640663.3264732505 216781.01291737703, 640661.1639129255 216785.02775100802, 
  640660.3367419982 216786.59657313264, 640658.3875420992 216790.37427188564, 640657.1835927182 216792.78689487485, 640655.9424446372 216795.36032642485, 640653.765189574 216800.3152229612, 
  640653.2982606251 216801.2408982852, 640652.4493669361 216802.96480338392, 640651.3917088212 216805.1657685859, 640650.6229513759 216806.80331532354, 640649.9775878104 216808.2109784786, 
  640649.1804828342 216809.53050169148, 640647.295870119 216812.78718420916, 640646.353731435 216814.48827641216, 640643.8462805866 216819.32161146, 640642.8276369496 216821.423211662, 
  640639.9686218789 216827.89569423962, 640638.9602330392 216830.41627953897))
  </test>
</case>


</run>
