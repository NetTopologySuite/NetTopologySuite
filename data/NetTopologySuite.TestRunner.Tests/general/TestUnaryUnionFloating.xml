<run>
  <desc>Tests for Geometry.union() method (unary union) with floating precision</desc>

<case>
  <desc>mP - showing that non-polygonal components are discarded correctly</desc>
  <a>
  GEOMETRYCOLLECTION (
    POLYGON ((-3 -2, 700 900, -6 900, -3 -2)),
    POLYGON((700 900, -1.6859349853697 899.55, 0.3 -0.4, 700 900)),
    POLYGON ((700 860, 700 899.5, -1.68593498537 899.55, 700 860))
    )
  </a>
<test>
  <op name="union" arg1="A">
  POLYGON ((-3 -2, -6 900, 700 900, 699.6114719806972 899.5000276853219, 700 899.5, 700 860, 670.2204017222961 861.6785046602191, 0.3 -0.4, 0.29420361150493 2.226702215615145, -3 -2))  </op>
</test>
</case>

<case>
  <desc>mP - fails old union, works with fallback to robust union </desc>
  <a>
GEOMETRYCOLLECTION (POLYGON ((1442792.376825024 586613.0372798223, 1442801.1729000006 586605.9444999993, 1442802.3023000006 586604.5309999995, 1442807.922738335 586597.4963922846, 1442811.875 586592.625, 
  1442816.375 586552.375, 1442818.375 586536.5, 1442837.25 586522.75, 1442858.625 586513.3125, 1442860.0458000004 586359.8120000008, 
  1442846.1665000003 586347.4833000004, 1442828.9711024084 586331.7342790922, 1442824.5 586327.625, 1442819.5588205794 586324.4035447894, 1442795.8491999991 586308.9019000009, 
  1442786.305400001 586302.6620000005, 1442743.0690589459 586289.2959423313, 1442736.875 586287.375, 1442733.2270572032 586280.3831096396, 1442727.9231000002 586270.1217999998, 
  1442717.6477000006 586247.6633000001, 1442702.8915 586246.8155000005, 1442702.8763273356 586246.8271607612, 1442702.625 586246.8125, 1442680.7495626681 586263.8324080176, 
  1442675.8421999998 586267.6039000005, 1442663.7469716591 586272.4048699932, 1442654.625 586276, 1442645.8689790622 586282.8296963316, 1442638.9966000002 586288.1681999993, 
  1442616.6262183667 586294.2536309358, 1442603.5016555593 586297.8120511336, 1442603.429044348 586297.7921860835, 1442588 586293.375, 1442571.404278074 586289.0311533214, 
  1442569.4287 586288.4907000009, 1442557.2005145822 586285.8102881054, 1442547.875 586283.75, 1442529.75 586283.5, 1442516.75 586286.875, 
  1442516.739275185 586286.957447015, 1442516.6987999994 586286.9682, 1442515.5671644935 586295.9680479554, 1442514.75 586302.25, 1442514.0194328113 586308.2771793071, 
  1442512.9423999991 586316.8429000005, 1442509.6118139348 586326.8122158175, 1442495.125 586326.5, 1442487.1175892556 586324.7967662229, 1442472.5545000006 586321.6644000001, 
  1442467.7901572168 586314.4461167208, 1442467.5 586314, 1442467.4865036218 586313.9860621515, 1442467.4760999996 586313.9703000002, 1442465.8786375856 586312.3256023664, 
  1442454.125 586300.1875, 1442444.875 586297.5, 1442444.6392224026 586297.2505144029, 1442449.5997000001 586257.7984999996, 1442452.4322999995 586235.2705000006, 
  1442439.7819999997 586292.0916000009, 1442439.7819901796 586292.091644109, 1442439.5294000003 586291.8092999998, 1442390.115700001 586288.1150000002, 1442370.4074000008 586276.5653000008, 
  1442355.0413000006 586262.5377999991, 1442340.5353472012 586257.2105784644, 1442340.5353472002 586257.2105784641, 1442336.25 586255.625, 1442325.5910591956 586256.614302889, 
  1442315.363 586257.5481000002, 1442292.1814950926 586253.7340849271, 1442276.375 586251.125, 1442273.6381688202 586251.823462124, 1442264.3990000002 586254.1627999991, 
  1442253.6061000004 586259.8609999996, 1442251.9230972226 586262.5813044166, 1442246 586272, 1442244.5 586283.9375, 1442245.7311193536 586288.0806901325, 
  1442247.6893000007 586294.898, 1442254.5884333106 586308.1392025423, 1442255 586308.9375, 1442269.5 586325.375, 1442269.701393541 586328.1105955987, 
  1442270.123579421 586335.9368994068, 1442267 586345.1875, 1442256.1265282636 586351.7046128677, 1442247.4563999996 586356.8556999993, 1442242.2861349494 586358.6768504218, 
  1442239 586359.8125, 1442230.8090218657 586360.5979362595, 1442230.8090218585 586360.5979362602, 1442229.8445999995 586360.6885000002, 1442220.1332542573 586365.6485742208, 
  1442202.875 586374.4375, 1442174.125 586395, 1442168.6856257604 586402.904090692, 1442166.1327 586406.5999999996, 1442166.139399169 586406.6040762074, 
  1442166.125 586406.625, 1442156.5 586406.875, 1442148.5 586414.9375, 1442136 586417.4375, 1442107.75 586417.9375, 
  1442099.5 586415.375, 1442091.5 586418.875, 1442083.125 586421.875, 1442075.625 586424.9375, 1442022.75 586476.75, 
  1442001.375 586514.875, 1441995.125 586520.6875, 1441990.125 586540.6875, 1441984.875 586553.625, 1441993.125 586576.875, 
  1442007 586594.6875, 1442013.875 586603.625, 1442050.625 586608.25, 1442058.625 586604.75, 1442067 586606.3125, 
  1442102.125 586591.5625, 1442128.25 586571.1875, 1442144.625 586565.6875, 1442167.875 586572.625, 1442214.5 586618.8125, 
  1442244.25 586638.6875, 1442251.75 586643.625, 1442280.375 586656.3125, 1442344.75 586665.4375, 1442363.75 586681.9375, 
  1442382.875 586710.0625, 1442396.875 586723.375, 1442416.625 586733.9375, 1442447.375 586737.8125, 1442458.375 586734.625, 
  1442488.125 586734.875, 1442499.5 586740.3125, 1442511.125 586751.875, 1442521.625 586757.1875, 1442539.375 586759.4375, 
  1442552.375 586756.5625, 1442559 586763.9375, 1442565.75 586770.3125, 1442573.375 586777.8125, 1442592.125 586781.1875, 
  1442622.5 586755.8125, 1442689.125 586714.75, 1442694.125 586705.8125, 1442706 586686.1875, 1442704.321086277 586680.5351571328, 
  1442706.0370000005 586685.9617999997, 1442710.8363000005 586693.8204999994, 1442715.5033999998 586701.4628999997, 1442720.2508000005 586696.0123999994, 1442727.262599999 586688.8308000006, 
  1442732.6284976315 586685.474001481, 1442741.7427999992 586685.6122999992, 1442748.3764999993 586686.4464999996, 1442758.5131 586687.7214000002, 1442764.7453000005 586686.4892999995, 
  1442771.1333000008 586684.2688999996, 1442775.7559999991 586679.8105999995, 1442781.7456 586671.4925999995, 1442787.7654999997 586664.1862000003, 1442793.4683999997 586653.8162999991, 
  1442798.1344000008 586645.3317000009, 1442800.9916999992 586638.6356000006, 1442799.8811000008 586631.4405000005, 1442795.1142999995 586621.7696000002, 1442792.376825024 586613.0372798223), 
  (1442610.9884494683 586562.2358721988, 1442610.9884495097 586562.2358721683, 1442613.5852577984 586560.329704382, 1442610.9884494683 586562.2358721988), 
  (1442779.6393632735 586585.2477607998, 1442779.6393632826 586585.2477608139, 1442781.2515999991 586587.7726000007, 1442779.6393632735 586585.2477607998), 
  (1442698.792684278 586658.1407545097, 1442698.75 586658.0625, 1442695.496979444 586653.778033902, 1442698.764799999 586658.0329, 1442698.792684278 586658.1407545097), 
  (1442684.3910177138 586642.6962495137, 1442679 586639.4375, 1442675.5781352064 586636.6070686276, 1442679 586639.4203999992, 1442684.3910177138 586642.6962495137), 
  (1442627.642518095 586588.7233315897, 1442626.25 586586.4375, 1442625.7506010253 586585.2741273883, 1442626.2447999995 586586.4213999994, 1442627.642518095 586588.7233315897)), 
  POLYGON ((1442439.7785232207 586292.1072164312, 1442440.1045215626 586292.4521681651, 1442444.6094000004 586297.4877000004, 1442444.6392229302 586297.250514961, 1442444.875 586297.5, 
    1442454.125 586300.1875, 1442467.5 586314, 1442472.5 586321.6875, 1442495.125 586326.5, 1442509.625 586326.8125, 
    1442513 586316.6875, 1442514.75 586302.25, 1442516.75 586286.875, 1442502.625 586283.125, 1442473.5 586258.25, 
    1442460 586237.4375, 1442453.729215512 586224.9562270289, 1442453.7324 586224.9309, 1442452.6416429265 586222.8595842597, 1442447.875 586213.75, 
    1442447.808586049 586213.7120491707, 1442436.8280999996 586205.4081999995, 1442429.7429561843 586197.346519061, 1442429.7425999995 586197.3460000008, 1442429.7425209705 586197.346023862, 
    1442429.7424999997 586197.3460000008, 1442420.348457477 586200.1823699325, 1442405.5 586197.3125, 1442405.308918606 586197.333731266, 1442384.3882 586197.7424999997, 
    1442374.7157173804 586203.4145535051, 1442374.5230038047 586203.4908881034, 1442358.0117579647 586194.2476051887, 1442357.1360868204 586193.7562213812, 1442354.3903419569 586191.2796156333, 
    1442342.25 586180.3125, 1442339.125 586172.875, 1442215.6352999993 586177.9802999999, 1442212.7412 586184.1677999999, 1442206.2548999991 586189.6744999997, 
    1442200.6139748846 586194.4634810651, 1442187.875 586205.25, 1442179.5 586208.1875, 1442161.625 586205.9375, 1442145.125 586197.3125, 
    1442130.4945404078 586187.216627299, 1442123.7678999994 586182.5543000009, 1442116.4277643955 586180.5053004731, 1442097.5 586175.1875, 1441943 586181.5, 
    1441943 586197.625, 1441940.5 586217.4375, 1441926.25 586226.75, 1441924.2778007109 586231.7434407535, 1441914.4517 586256.5198999997, 
    1441908.1247687167 586261.8216973001, 1441899.75 586268.8125, 1441879.5 586286.375, 1441879.2898242797 586286.813034494, 1441879.2317999993 586286.8640000001, 
    1441858.3190596465 586330.5189309772, 1441853.5 586340.5625, 1441851.6856287098 586343.4251747022, 1441842.2035000008 586358.3054000009, 1441834.8607951032 586370.6278414946, 
    1441833.25 586373.3125, 1441810.75 586391.625, 1441778.75 586413.8125, 1441767.2568114898 586416.5777784386, 1441762.174900001 586417.7879000008, 
    1441750.2715000007 586416.2910999991, 1441744.9791318614 586413.4836395769, 1442267.5395999998 586854.2710999995, 1442269.5296 586846.4580000006, 1442275.5483 586840.6634, 
    1442276.7326494846 586829.2451253313, 1442276.75 586829.25, 1442284.75 586829.25, 1442287.2222526243 586828.1889004223, 1442313.015900001 586817.1534000002, 
    1442363.2964999992 586821.9648000002, 1442363.2965442569 586821.9647946662, 1442363.296599999 586821.9648000002, 1442378.8994999994 586820.0843000002, 1442383.525570332 586819.5266852349, 
    1442383.75 586819.5, 1442383.7512076476 586819.4994874861, 1442383.7594000008 586819.4985000007, 1442383.8032383544 586819.4774061618, 1442409.375 586808.625, 
    1442416.75 586813.5625, 1442425.25 586833.8125, 1442428.25 586842.25, 1442434.25 586859.125, 1442445.75 586871.625, 
    1442458.25 586876.25, 1442471.875 586871.9375, 1442496.375 586853.8125, 1442514.875 586835, 1442519.875 586826.5625, 
    1442541.625 586806.0625, 1442561.875 586776.875, 1442565.75 586770.3125, 1442559 586763.9375, 1442552.375 586756.5625, 
    1442539.375 586759.4375, 1442521.625 586757.1875, 1442511.125 586751.875, 1442499.5 586740.3125, 1442488.125 586734.875, 
    1442458.375 586734.625, 1442447.375 586737.8125, 1442416.625 586733.9375, 1442399.0447617373 586724.5354105495, 1442398.0501000006 586667.7786999997, 
    1442398.050099704 586667.778683074, 1442399.695699999 586654.6911999993, 1442405.9337000009 586605.0795000009, 1442412.1718000006 586555.4679000005, 1442418.4098000005 586505.8563000001, 
    1442424.6478000004 586456.2446999997, 1442426.5815999992 586440.8651, 1442420.3818999995 586440.0854000002, 1442413.9372000005 586435.2433000002, 1442412.1961939337 586435.0243554455, 
    1442412.1962000001 586435.0242999997, 1442412.4998000003 586432.2496000007, 1442433.8748000003 586318.6246000007, 1442439.7785232207 586292.1072164312), 
    (1442269.7013935412 586328.1105956017, 1442269.701393541 586328.1105955987, 1442269.5533000007 586325.3652999997, 1442269.7013935412 586328.1105956017), 
    (1442246.0902999993 586272.0190999992, 1442252.00460855 586262.4516880431, 1442252.0046085573 586262.4516880317, 1442246.0902999993 586272.0190999992), 
    (1442273.6381688032 586251.8234621283, 1442273.6381688202 586251.823462124, 1442276.367900001 586251.1323000006, 1442273.6381688032 586251.8234621283), 
    (1442325.5910591593 586256.6143028924, 1442325.5910591956 586256.614302889, 1442336.2595000006 586255.6403000001, 1442325.5910591593 586256.6143028924), 
    (1442177.2208999991 586747.1600000001, 1442177.7937062413 586748.1458974424, 1442177.7937062457 586748.1458974503, 1442177.2208999991 586747.1600000001), 
    (1442391.6817780344 586718.426374695, 1442393.3330481509 586720.0069832864, 1442393.3330481383 586720.0069832744, 1442391.6817780344 586718.4263746951, 1442391.6817780344 586718.426374695)))
 </a>
<test>
  <op name="union" arg1="A">
 POLYGON ((1442801.1729000006 586605.9444999993, 1442802.3023000006 586604.5309999995, 1442807.922738335 586597.4963922846, 1442811.875 586592.625, 1442816.375 586552.375, 1442818.375 586536.5, 1442837.25 586522.75, 1442858.625 586513.3125, 1442860.0458000004 586359.8120000008, 1442846.1665000003 586347.4833000004, 1442828.9711024084 586331.7342790922, 1442824.5 586327.625, 1442819.5588205794 586324.4035447894, 1442795.8491999991 586308.9019000009, 1442786.305400001 586302.6620000005, 1442743.0690589459 586289.2959423313, 1442736.875 586287.375, 1442733.2270572032 586280.3831096396, 1442727.9231000002 586270.1217999998, 1442717.6477000006 586247.6633000001, 1442702.8915 586246.8155000005, 1442702.8763273356 586246.8271607612, 1442702.625 586246.8125, 1442680.7495626681 586263.8324080176, 1442675.8421999998 586267.6039000005, 1442663.7469716591 586272.4048699932, 1442654.625 586276, 1442645.8689790622 586282.8296963316, 1442638.9966000002 586288.1681999993, 1442616.6262183667 586294.2536309358, 1442603.5016555593 586297.8120511336, 1442603.429044348 586297.7921860835, 1442588 586293.375, 1442571.404278074 586289.0311533214, 1442569.4287 586288.4907000009, 1442557.2005145822 586285.8102881054, 1442547.875 586283.75, 1442529.75 586283.5, 1442516.75 586286.875, 1442502.625 586283.125, 1442473.5 586258.25, 1442460 586237.4375, 1442453.729215512 586224.9562270289, 1442453.7324 586224.9309, 1442452.6416429265 586222.8595842597, 1442447.875 586213.75, 1442447.808586049 586213.7120491707, 1442436.8280999996 586205.4081999995, 1442429.7429561843 586197.346519061, 1442429.7425999995 586197.3460000008, 1442429.7425209705 586197.346023862, 1442429.7424999997 586197.3460000008, 1442420.348457477 586200.1823699325, 1442405.5 586197.3125, 1442405.308918606 586197.333731266, 1442384.3882 586197.7424999997, 1442374.7157173804 586203.4145535051, 1442374.5230038047 586203.4908881034, 1442358.0117579647 586194.2476051887, 1442357.1360868204 586193.7562213812, 1442354.3903419569 586191.2796156333, 1442342.25 586180.3125, 1442339.125 586172.875, 1442215.6352999993 586177.9802999999, 1442212.7412 586184.1677999999, 1442206.2548999991 586189.6744999997, 1442200.6139748846 586194.4634810651, 1442187.875 586205.25, 1442179.5 586208.1875, 1442161.625 586205.9375, 1442145.125 586197.3125, 1442130.4945404078 586187.216627299, 1442123.7678999994 586182.5543000009, 1442116.4277643955 586180.5053004731, 1442097.5 586175.1875, 1441943 586181.5, 1441943 586197.625, 1441940.5 586217.4375, 1441926.25 586226.75, 1441924.2778007109 586231.7434407535, 1441914.4517 586256.5198999997, 1441908.1247687167 586261.8216973001, 1441899.75 586268.8125, 1441879.5 586286.375, 1441879.2898242797 586286.813034494, 1441879.2317999993 586286.8640000001, 1441858.3190596465 586330.5189309772, 1441853.5 586340.5625, 1441851.6856287098 586343.4251747022, 1441842.2035000008 586358.3054000009, 1441834.8607951032 586370.6278414946, 1441833.25 586373.3125, 1441810.75 586391.625, 1441778.75 586413.8125, 1441767.2568114898 586416.5777784386, 1441762.174900001 586417.7879000008, 1441750.2715000007 586416.2910999991, 1441744.9791318614 586413.4836395769, 1442267.5395999998 586854.2710999995, 1442269.5296 586846.4580000006, 1442275.5483 586840.6634, 1442276.7326494846 586829.2451253313, 1442276.75 586829.25, 1442284.75 586829.25, 1442287.2222526243 586828.1889004223, 1442313.015900001 586817.1534000002, 1442363.2964999992 586821.9648000002, 1442363.2965442569 586821.9647946662, 1442363.296599999 586821.9648000002, 1442378.8994999994 586820.0843000002, 1442383.525570332 586819.5266852349, 1442383.75 586819.5, 1442383.7512076476 586819.4994874861, 1442383.7594000008 586819.4985000007, 1442383.8032383544 586819.4774061618, 1442409.375 586808.625, 1442416.75 586813.5625, 1442425.25 586833.8125, 1442428.25 586842.25, 1442434.25 586859.125, 1442445.75 586871.625, 1442458.25 586876.25, 1442471.875 586871.9375, 1442496.375 586853.8125, 1442514.875 586835, 1442519.875 586826.5625, 1442541.625 586806.0625, 1442561.875 586776.875, 1442565.75 586770.3125, 1442573.375 586777.8125, 1442592.125 586781.1875, 1442622.5 586755.8125, 1442689.125 586714.75, 1442694.125 586705.8125, 1442706 586686.1875, 1442704.321086277 586680.5351571328, 1442706.0370000005 586685.9617999997, 1442710.8363000005 586693.8204999994, 1442715.5033999998 586701.4628999997, 1442720.2508000005 586696.0123999994, 1442727.262599999 586688.8308000006, 1442732.6284976315 586685.474001481, 1442741.7427999992 586685.6122999992, 1442748.3764999993 586686.4464999996, 1442758.5131 586687.7214000002, 1442764.7453000005 586686.4892999995, 1442771.1333000008 586684.2688999996, 1442775.7559999991 586679.8105999995, 1442781.7456 586671.4925999995, 1442787.7654999997 586664.1862000003, 1442793.4683999997 586653.8162999991, 1442798.1344000008 586645.3317000009, 1442800.9916999992 586638.6356000006, 1442799.8811000008 586631.4405000005, 1442795.1142999995 586621.7696000002, 1442792.376825024 586613.0372798223, 1442801.1729000006 586605.9444999993), 
  (1442698.75 586658.0625, 1442695.496979444 586653.778033902, 1442698.764799999 586658.0329, 1442698.792684278 586658.1407545097, 1442698.75 586658.0625), 
  (1442679 586639.4375, 1442675.5781352064 586636.6070686276, 1442679 586639.4203999992, 1442684.3910177138 586642.6962495137, 1442679 586639.4375), 
  (1442626.25 586586.4375, 1442625.7506010253 586585.2741273883, 1442626.2447999995 586586.4213999994, 1442627.642518095 586588.7233315897, 1442626.25 586586.4375))
  </op>
</test>
</case>

</run>
